<!DOCTYPE html>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%-- TODO: This is just for debug, session should actually be true --%>
<%@ page session="false" %>

<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Compare Stocks</title>

        <!-- Google Chart API -->
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

        <script type="text/javascript" src="../js_files/datastream.js"></script>
        <script type="text/javascript" src="../js_files/storage.js"></script>
        <script type="text/javascript" src="../js_files/graphs.js"></script>

        <script type="text/javascript">
            /*let input = "{\"GOOGL\":{\"description\":\"Alphabet Inc. provides online advertising services in the United States, Europe, the Middle East, Africa, the Asia-Pacific, Canada, and Latin America. It offers performance and brand advertising services. The company operates through Google and Other Bets segments. The Google segment offers products, such as Ads, Android, Chrome, Google Cloud, Google Maps, Google Play, Hardware, Search, and YouTube, as well as technical infrastructure. It also offers digital content, cloud services, hardware devices, and other miscellaneous products and services. The Other Bets segment includes businesses, including Access, Calico, CapitalG, GV, Verily, Waymo, and X, as well as Internet and television services. Alphabet Inc. was founded in 1998 and is headquartered in Mountain View, California.\",\"history\":[{\"date\":\"2004-08-01\",\"open\":\"50.050049\",\"high\":\"56.796795\",\"low\":\"48.028027\",\"close\":\"51.236237\",\"adjclose\":\"51.236237\",\"volume\":\"133606300\"},{\"date\":\"2004-09-01\",\"open\":\"51.401402\",\"high\":\"67.577576\",\"low\":\"49.519520\",\"close\":\"64.864868\",\"adjclose\":\"64.864868\",\"volume\":\"212494700\"},{\"date\":\"2004-10-01\",\"open\":\"65.465462\",\"high\":\"100.075073\",\"low\":\"64.514511\",\"close\":\"95.415413\",\"adjclose\":\"95.415413\",\"volume\":\"513620700\"},{\"date\":\"2004-11-01\",\"open\":\"96.871872\",\"high\":\"100.900902\",\"low\":\"80.735733\",\"close\":\"91.081078\",\"adjclose\":\"91.081078\",\"volume\":\"554632100\"},{\"date\":\"2004-12-01\",\"open\":\"91.066063\",\"high\":\"100.040039\",\"low\":\"84.319321\",\"close\":\"96.491493\",\"adjclose\":\"96.491493\",\"volume\":\"290392600\"},{\"date\":\"2005-01-01\",\"open\":\"98.798798\",\"high\":\"102.752754\",\"low\":\"88.233231\",\"close\":\"97.907906\",\"adjclose\":\"97.907906\",\"volume\":\"409918400\"},{\"date\":\"2005-02-01\",\"open\":\"97.287285\",\"high\":\"108.508507\",\"low\":\"90.590591\",\"close\":\"94.089088\",\"adjclose\":\"94.089088\",\"volume\":\"650567500\"},{\"date\":\"2005-03-01\",\"open\":\"94.739738\",\"high\":\"95.020020\",\"low\":\"86.371368\",\"close\":\"90.345345\",\"adjclose\":\"90.345345\",\"volume\":\"343553000\"},{\"date\":\"2005-04-01\",\"open\":\"90.970970\",\"high\":\"112.482483\",\"low\":\"90.010010\",\"close\":\"110.110107\",\"adjclose\":\"110.110107\",\"volume\":\"452927500\"},{\"date\":\"2005-05-01\",\"open\":\"111.136139\",\"high\":\"139.339340\",\"low\":\"110.215218\",\"close\":\"138.773773\",\"adjclose\":\"138.773773\",\"volume\":\"507029100\"},{\"date\":\"2005-06-01\",\"open\":\"141.741745\",\"high\":\"154.779785\",\"low\":\"133.848846\",\"close\":\"147.222229\",\"adjclose\":\"147.222229\",\"volume\":\"777224400\"},{\"date\":\"2005-07-01\",\"open\":\"147.667664\",\"high\":\"159.059052\",\"low\":\"143.638641\",\"close\":\"144.024017\",\"adjclose\":\"144.024017\",\"volume\":\"409487200\"},{\"date\":\"2005-08-01\",\"open\":\"144.204208\",\"high\":\"150.010010\",\"low\":\"136.811813\",\"close\":\"143.143143\",\"adjclose\":\"143.143143\",\"volume\":\"285656800\"},{\"date\":\"2005-09-01\",\"open\":\"143.098099\",\"high\":\"160.635635\",\"low\":\"142.642639\",\"close\":\"158.388382\",\"adjclose\":\"158.388382\",\"volume\":\"339965100\"},{\"date\":\"2005-10-01\",\"open\":\"156.971970\",\"high\":\"187.562561\",\"low\":\"145.485489\",\"close\":\"186.256256\",\"adjclose\":\"186.256256\",\"volume\":\"385538000\"},{\"date\":\"2005-11-01\",\"open\":\"186.116119\",\"high\":\"215.835831\",\"low\":\"184.689697\",\"close\":\"202.657654\",\"adjclose\":\"202.657654\",\"volume\":\"422908000\"},{\"date\":\"2005-12-01\",\"open\":\"204.804810\",\"high\":\"223.328323\",\"low\":\"199.704712\",\"close\":\"207.637634\",\"adjclose\":\"207.637634\",\"volume\":\"397165000\"},{\"date\":\"2006-01-01\",\"open\":\"211.471466\",\"high\":\"237.792786\",\"low\":\"197.567566\",\"close\":\"216.546539\",\"adjclose\":\"216.546539\",\"volume\":\"597481100\"},{\"date\":\"2006-02-01\",\"open\":\"194.709717\",\"high\":\"203.453461\",\"low\":\"169.084091\",\"close\":\"181.491486\",\"adjclose\":\"181.491486\",\"volume\":\"594453900\"},{\"date\":\"2006-03-01\",\"open\":\"184.464462\",\"high\":\"199.699707\",\"low\":\"165.940948\",\"close\":\"195.195190\",\"adjclose\":\"195.195190\",\"volume\":\"612913300\"},{\"date\":\"2006-04-01\",\"open\":\"194.959961\",\"high\":\"225.585587\",\"low\":\"194.159164\",\"close\":\"209.179184\",\"adjclose\":\"209.179184\",\"volume\":\"370257300\"},{\"date\":\"2006-05-01\",\"open\":\"209.444443\",\"high\":\"209.929932\",\"low\":\"180.465469\",\"close\":\"186.096100\",\"adjclose\":\"186.096100\",\"volume\":\"351526700\"},{\"date\":\"2006-06-01\",\"open\":\"186.956955\",\"high\":\"209.874878\",\"low\":\"185.985992\",\"close\":\"209.874878\",\"adjclose\":\"209.874878\",\"volume\":\"284475000\"},{\"date\":\"2006-07-01\",\"open\":\"210.230225\",\"high\":\"214.159164\",\"low\":\"189.034027\",\"close\":\"193.493500\",\"adjclose\":\"193.493500\",\"volume\":\"254787800\"},{\"date\":\"2006-08-01\",\"open\":\"192.747742\",\"high\":\"195.195190\",\"low\":\"181.861862\",\"close\":\"189.454453\",\"adjclose\":\"189.454453\",\"volume\":\"213728900\"},{\"date\":\"2006-09-01\",\"open\":\"190.685684\",\"high\":\"209.554550\",\"low\":\"188.548553\",\"close\":\"201.151154\",\"adjclose\":\"201.151154\",\"volume\":\"242858900\"},{\"date\":\"2006-10-01\",\"open\":\"201.151154\",\"high\":\"246.226227\",\"low\":\"199.294296\",\"close\":\"238.433426\",\"adjclose\":\"238.433426\",\"volume\":\"316709800\"},{\"date\":\"2006-11-01\",\"open\":\"239.619614\",\"high\":\"256.756744\",\"low\":\"232.762756\",\"close\":\"242.647644\",\"adjclose\":\"242.647644\",\"volume\":\"236642800\"},{\"date\":\"2006-12-01\",\"open\":\"243.233231\",\"high\":\"246.446442\",\"low\":\"226.396393\",\"close\":\"230.470474\",\"adjclose\":\"230.470474\",\"volume\":\"183144000\"},{\"date\":\"2007-01-01\",\"open\":\"233.233231\",\"high\":\"256.756744\",\"low\":\"230.785782\",\"close\":\"251.001007\",\"adjclose\":\"251.001007\",\"volume\":\"248923900\"},{\"date\":\"2007-02-01\",\"open\":\"253.253250\",\"high\":\"253.258255\",\"low\":\"221.741745\",\"close\":\"224.949951\",\"adjclose\":\"224.949951\",\"volume\":\"227599400\"},{\"date\":\"2007-03-01\",\"open\":\"221.556549\",\"high\":\"233.233231\",\"low\":\"218.718719\",\"close\":\"229.309311\",\"adjclose\":\"229.309311\",\"volume\":\"235995600\"},{\"date\":\"2007-04-01\",\"open\":\"229.109116\",\"high\":\"246.496490\",\"low\":\"226.286285\",\"close\":\"235.925919\",\"adjclose\":\"235.925919\",\"volume\":\"185730000\"},{\"date\":\"2007-05-01\",\"open\":\"236.331329\",\"high\":\"254.644638\",\"low\":\"228.933929\",\"close\":\"249.204208\",\"adjclose\":\"249.204208\",\"volume\":\"198963200\"},{\"date\":\"2007-06-01\",\"open\":\"250.750748\",\"high\":\"267.762756\",\"low\":\"249.044037\",\"close\":\"261.611603\",\"adjclose\":\"261.611603\",\"volume\":\"257837700\"},{\"date\":\"2007-07-01\",\"open\":\"263.007996\",\"high\":\"279.569580\",\"low\":\"249.689697\",\"close\":\"255.255249\",\"adjclose\":\"255.255249\",\"volume\":\"233027400\"},{\"date\":\"2007-08-01\",\"open\":\"255.505508\",\"high\":\"263.673676\",\"low\":\"240.470474\",\"close\":\"257.882874\",\"adjclose\":\"257.882874\",\"volume\":\"177222800\"},{\"date\":\"2007-09-01\",\"open\":\"257.767761\",\"high\":\"286.181183\",\"low\":\"255.695694\",\"close\":\"283.918915\",\"adjclose\":\"283.918915\",\"volume\":\"138687900\"},{\"date\":\"2007-10-01\",\"open\":\"285.270264\",\"high\":\"353.853851\",\"low\":\"285.090088\",\"close\":\"353.853851\",\"adjclose\":\"353.853851\",\"volume\":\"310590000\"},{\"date\":\"2007-11-01\",\"open\":\"351.746735\",\"high\":\"373.993988\",\"low\":\"308.318329\",\"close\":\"346.846832\",\"adjclose\":\"346.846832\",\"volume\":\"342606600\"},{\"date\":\"2007-12-01\",\"open\":\"345.850861\",\"high\":\"362.762756\",\"low\":\"326.576569\",\"close\":\"346.086090\",\"adjclose\":\"346.086090\",\"volume\":\"170456500\"},{\"date\":\"2008-01-01\",\"open\":\"346.781769\",\"high\":\"349.034027\",\"low\":\"259.759766\",\"close\":\"282.432434\",\"adjclose\":\"282.432434\",\"volume\":\"315262000\"},{\"date\":\"2008-02-01\",\"open\":\"264.599609\",\"high\":\"270.790802\",\"low\":\"223.648651\",\"close\":\"235.825821\",\"adjclose\":\"235.825821\",\"volume\":\"354015500\"},{\"date\":\"2008-03-01\",\"open\":\"235.990997\",\"high\":\"236.596603\",\"low\":\"206.261261\",\"close\":\"220.455460\",\"adjclose\":\"220.455460\",\"volume\":\"290938800\"},{\"date\":\"2008-04-01\",\"open\":\"224.094101\",\"high\":\"292.722717\",\"low\":\"220.720718\",\"close\":\"287.432434\",\"adjclose\":\"287.432434\",\"volume\":\"285802500\"},{\"date\":\"2008-05-01\",\"open\":\"289.444458\",\"high\":\"301.526520\",\"low\":\"269.174164\",\"close\":\"293.193207\",\"adjclose\":\"293.193207\",\"volume\":\"209055200\"},{\"date\":\"2008-06-01\",\"open\":\"291.541534\",\"high\":\"294.314301\",\"low\":\"257.802795\",\"close\":\"263.473480\",\"adjclose\":\"263.473480\",\"volume\":\"187380600\"},{\"date\":\"2008-07-01\",\"open\":\"260.050049\",\"high\":\"278.118103\",\"low\":\"233.033035\",\"close\":\"237.112106\",\"adjclose\":\"237.112106\",\"volume\":\"207962700\"},{\"date\":\"2008-08-01\",\"open\":\"236.491486\",\"high\":\"255.585587\",\"low\":\"231.181183\",\"close\":\"231.876877\",\"adjclose\":\"231.876877\",\"volume\":\"137490300\"},{\"date\":\"2008-09-01\",\"open\":\"238.623627\",\"high\":\"241.331329\",\"low\":\"190.545547\",\"close\":\"200.460464\",\"adjclose\":\"200.460464\",\"volume\":\"267887800\"},{\"date\":\"2008-10-01\",\"open\":\"205.780777\",\"high\":\"208.698700\",\"low\":\"154.874878\",\"close\":\"179.859863\",\"adjclose\":\"179.859863\",\"volume\":\"398191400\"},{\"date\":\"2008-11-01\",\"open\":\"178.968964\",\"high\":\"186.366364\",\"low\":\"123.773773\",\"close\":\"146.626633\",\"adjclose\":\"146.626633\",\"volume\":\"315749100\"},{\"date\":\"2008-12-01\",\"open\":\"143.483490\",\"high\":\"164.914917\",\"low\":\"131.421417\",\"close\":\"153.978973\",\"adjclose\":\"153.978973\",\"volume\":\"225787700\"},{\"date\":\"2009-01-01\",\"open\":\"154.454453\",\"high\":\"176.341339\",\"low\":\"141.516510\",\"close\":\"169.434433\",\"adjclose\":\"169.434433\",\"volume\":\"219542700\"},{\"date\":\"2009-02-01\",\"open\":\"167.312317\",\"high\":\"190.690689\",\"low\":\"164.939941\",\"close\":\"169.164169\",\"adjclose\":\"169.164169\",\"volume\":\"222946400\"},{\"date\":\"2009-03-01\",\"open\":\"166.831833\",\"high\":\"179.759766\",\"low\":\"144.869873\",\"close\":\"174.204208\",\"adjclose\":\"174.204208\",\"volume\":\"227721500\"},{\"date\":\"2009-04-01\",\"open\":\"172.062057\",\"high\":\"202.077072\",\"low\":\"170.475479\",\"close\":\"198.183182\",\"adjclose\":\"198.183182\",\"volume\":\"175489100\"},{\"date\":\"2009-05-01\",\"open\":\"197.712708\",\"high\":\"208.823822\",\"low\":\"192.537537\",\"close\":\"208.823822\",\"adjclose\":\"208.823822\",\"volume\":\"113955500\"},{\"date\":\"2009-06-01\",\"open\":\"209.574570\",\"high\":\"223.893890\",\"low\":\"201.146149\",\"close\":\"211.006012\",\"adjclose\":\"211.006012\",\"volume\":\"140780100\"},{\"date\":\"2009-07-01\",\"open\":\"212.312317\",\"high\":\"226.576584\",\"low\":\"198.188187\",\"close\":\"221.746750\",\"adjclose\":\"221.746750\",\"volume\":\"145887200\"},{\"date\":\"2009-08-01\",\"open\":\"224.594589\",\"high\":\"237.412415\",\"low\":\"219.499496\",\"close\":\"231.066071\",\"adjclose\":\"231.066071\",\"volume\":\"97378800\"},{\"date\":\"2009-09-01\",\"open\":\"230.070068\",\"high\":\"253.753754\",\"low\":\"226.521515\",\"close\":\"248.173172\",\"adjclose\":\"248.173172\",\"volume\":\"102056300\"},{\"date\":\"2009-10-01\",\"open\":\"246.746750\",\"high\":\"281.101105\",\"low\":\"241.541534\",\"close\":\"268.328339\",\"adjclose\":\"268.328339\",\"volume\":\"154193500\"},{\"date\":\"2009-11-01\",\"open\":\"268.808807\",\"high\":\"293.823822\",\"low\":\"264.384399\",\"close\":\"291.791779\",\"adjclose\":\"291.791779\",\"volume\":\"81729700\"},{\"date\":\"2009-12-01\",\"open\":\"294.359344\",\"high\":\"313.308319\",\"low\":\"289.879883\",\"close\":\"310.300293\",\"adjclose\":\"310.300293\",\"volume\":\"85154200\"},{\"date\":\"2010-01-01\",\"open\":\"313.788788\",\"high\":\"315.070068\",\"low\":\"263.068054\",\"close\":\"265.235229\",\"adjclose\":\"265.235229\",\"volume\":\"178021600\"},{\"date\":\"2010-02-01\",\"open\":\"267.567566\",\"high\":\"274.024017\",\"low\":\"260.260254\",\"close\":\"263.663666\",\"adjclose\":\"263.663666\",\"volume\":\"103963600\"},{\"date\":\"2010-03-01\",\"open\":\"264.864868\",\"high\":\"294.434448\",\"low\":\"264.134125\",\"close\":\"283.843842\",\"adjclose\":\"283.843842\",\"volume\":\"167380600\"},{\"date\":\"2010-04-01\",\"open\":\"285.960968\",\"high\":\"299.219208\",\"low\":\"260.775787\",\"close\":\"263.113098\",\"adjclose\":\"263.113098\",\"volume\":\"145974700\"},{\"date\":\"2010-05-01\",\"open\":\"263.513519\",\"high\":\"266.726715\",\"low\":\"230.230225\",\"close\":\"243.058060\",\"adjclose\":\"243.058060\",\"volume\":\"162958300\"},{\"date\":\"2010-06-01\",\"open\":\"240.455460\",\"high\":\"254.879883\",\"low\":\"222.582581\",\"close\":\"222.697693\",\"adjclose\":\"222.697693\",\"volume\":\"119605600\"},{\"date\":\"2010-07-01\",\"open\":\"222.867874\",\"high\":\"248.998993\",\"low\":\"217.032028\",\"close\":\"242.667664\",\"adjclose\":\"242.667664\",\"volume\":\"138480300\"},{\"date\":\"2010-08-01\",\"open\":\"244.739746\",\"high\":\"254.554550\",\"low\":\"224.049042\",\"close\":\"225.235229\",\"adjclose\":\"225.235229\",\"volume\":\"105603500\"},{\"date\":\"2010-09-01\",\"open\":\"227.717712\",\"high\":\"268.693695\",\"low\":\"226.476471\",\"close\":\"263.158173\",\"adjclose\":\"263.158173\",\"volume\":\"119281400\"},{\"date\":\"2010-10-01\",\"open\":\"265.265259\",\"high\":\"312.682678\",\"low\":\"259.684692\",\"close\":\"307.157166\",\"adjclose\":\"307.157166\",\"volume\":\"158536000\"},{\"date\":\"2010-11-01\",\"open\":\"308.173187\",\"high\":\"315.740753\",\"low\":\"276.931946\",\"close\":\"278.133148\",\"adjclose\":\"278.133148\",\"volume\":\"116766000\"},{\"date\":\"2010-12-01\",\"open\":\"281.781769\",\"high\":\"303.803802\",\"low\":\"281.481476\",\"close\":\"297.282288\",\"adjclose\":\"297.282288\",\"volume\":\"84484800\"},{\"date\":\"2011-01-01\",\"open\":\"298.538544\",\"high\":\"321.801788\",\"low\":\"298.073059\",\"close\":\"300.480469\",\"adjclose\":\"300.480469\",\"volume\":\"119847800\"},{\"date\":\"2011-02-01\",\"open\":\"302.547546\",\"high\":\"315.905914\",\"low\":\"300.975983\",\"close\":\"307.007019\",\"adjclose\":\"307.007019\",\"volume\":\"83653600\"},{\"date\":\"2011-03-01\",\"open\":\"309.199188\",\"high\":\"309.919922\",\"low\":\"275.915924\",\"close\":\"293.673676\",\"adjclose\":\"293.673676\",\"volume\":\"120156600\"},{\"date\":\"2011-04-01\",\"open\":\"294.674683\",\"high\":\"297.892883\",\"low\":\"259.759766\",\"close\":\"272.322327\",\"adjclose\":\"272.322327\",\"volume\":\"140342000\"},{\"date\":\"2011-05-01\",\"open\":\"273.123108\",\"high\":\"273.138153\",\"low\":\"256.956970\",\"close\":\"264.774780\",\"adjclose\":\"264.774780\",\"volume\":\"90564200\"},{\"date\":\"2011-06-01\",\"open\":\"264.284271\",\"high\":\"266.866852\",\"low\":\"236.746750\",\"close\":\"253.443451\",\"adjclose\":\"253.443451\",\"volume\":\"118130800\"},{\"date\":\"2011-07-01\",\"open\":\"253.623627\",\"high\":\"314.064056\",\"low\":\"253.443451\",\"close\":\"302.147156\",\"adjclose\":\"302.147156\",\"volume\":\"161948200\"},{\"date\":\"2011-08-01\",\"open\":\"305.915924\",\"high\":\"308.058044\",\"low\":\"245.675674\",\"close\":\"270.750763\",\"adjclose\":\"270.750763\",\"volume\":\"213336700\"},{\"date\":\"2011-09-01\",\"open\":\"270.645660\",\"high\":\"279.539551\",\"low\":\"255.505508\",\"close\":\"257.777771\",\"adjclose\":\"257.777771\",\"volume\":\"117140800\"},{\"date\":\"2011-10-01\",\"open\":\"255.180176\",\"high\":\"301.651642\",\"low\":\"240.540543\",\"close\":\"296.616608\",\"adjclose\":\"296.616608\",\"volume\":\"154275400\"},{\"date\":\"2011-11-01\",\"open\":\"290.340332\",\"high\":\"309.459473\",\"low\":\"280.945953\",\"close\":\"299.994995\",\"adjclose\":\"299.994995\",\"volume\":\"120479300\"},{\"date\":\"2011-12-01\",\"open\":\"300.300293\",\"high\":\"323.703705\",\"low\":\"299.799805\",\"close\":\"323.273285\",\"adjclose\":\"323.273285\",\"volume\":\"109983800\"},{\"date\":\"2012-01-01\",\"open\":\"326.796783\",\"high\":\"335.460449\",\"low\":\"282.557556\",\"close\":\"290.345337\",\"adjclose\":\"290.345337\",\"volume\":\"147136900\"},{\"date\":\"2012-02-01\",\"open\":\"292.762756\",\"high\":\"313.113098\",\"low\":\"289.859863\",\"close\":\"309.434448\",\"adjclose\":\"309.434448\",\"volume\":\"94633500\"},{\"date\":\"2012-03-01\",\"open\":\"311.441437\",\"high\":\"329.624634\",\"low\":\"297.217224\",\"close\":\"320.940948\",\"adjclose\":\"320.940948\",\"volume\":\"94564700\"},{\"date\":\"2012-04-01\",\"open\":\"320.705719\",\"high\":\"326.896912\",\"low\":\"295.395386\",\"close\":\"302.727722\",\"adjclose\":\"302.727722\",\"volume\":\"117636800\"},{\"date\":\"2012-05-01\",\"open\":\"302.197205\",\"high\":\"319.244232\",\"low\":\"289.789795\",\"close\":\"290.720734\",\"adjclose\":\"290.720734\",\"volume\":\"117228000\"},{\"date\":\"2012-06-01\",\"open\":\"286.181183\",\"high\":\"294.239227\",\"low\":\"278.538544\",\"close\":\"290.325317\",\"adjclose\":\"290.325317\",\"volume\":\"92914500\"},{\"date\":\"2012-07-01\",\"open\":\"291.201202\",\"high\":\"321.621613\",\"low\":\"281.326324\",\"close\":\"316.801788\",\"adjclose\":\"316.801788\",\"volume\":\"102469600\"},{\"date\":\"2012-08-01\",\"open\":\"318.968964\",\"high\":\"344.839844\",\"low\":\"312.017029\",\"close\":\"342.887878\",\"adjclose\":\"342.887878\",\"volume\":\"94031300\"},{\"date\":\"2012-09-01\",\"open\":\"342.617615\",\"high\":\"382.827820\",\"low\":\"337.087097\",\"close\":\"377.627625\",\"adjclose\":\"377.627625\",\"volume\":\"120233800\"},{\"date\":\"2012-10-01\",\"open\":\"379.904907\",\"high\":\"387.577576\",\"low\":\"335.185181\",\"close\":\"340.490479\",\"adjclose\":\"340.490479\",\"volume\":\"143452800\"},{\"date\":\"2012-11-01\",\"open\":\"340.090088\",\"high\":\"349.959961\",\"low\":\"318.318329\",\"close\":\"349.534546\",\"adjclose\":\"349.534546\",\"volume\":\"93264000\"},{\"date\":\"2012-12-01\",\"open\":\"351.471466\",\"high\":\"364.914917\",\"low\":\"341.506500\",\"close\":\"354.044037\",\"adjclose\":\"354.044037\",\"volume\":\"83306700\"},{\"date\":\"2013-01-01\",\"open\":\"360.070068\",\"high\":\"380.855865\",\"low\":\"348.108093\",\"close\":\"378.223236\",\"adjclose\":\"378.223236\",\"volume\":\"104704600\"},{\"date\":\"2013-02-01\",\"open\":\"379.479492\",\"high\":\"404.889893\",\"low\":\"379.429443\",\"close\":\"401.001007\",\"adjclose\":\"401.001007\",\"volume\":\"92587100\"},{\"date\":\"2013-03-01\",\"open\":\"399.299286\",\"high\":\"422.422424\",\"low\":\"397.047058\",\"close\":\"397.492493\",\"adjclose\":\"397.492493\",\"volume\":\"85011800\"},{\"date\":\"2013-04-01\",\"open\":\"397.902893\",\"high\":\"414.234222\",\"low\":\"381.011017\",\"close\":\"412.697693\",\"adjclose\":\"412.697693\",\"volume\":\"106996300\"},{\"date\":\"2013-05-01\",\"open\":\"412.042053\",\"high\":\"460.760773\",\"low\":\"408.588593\",\"close\":\"436.046051\",\"adjclose\":\"436.046051\",\"volume\":\"98734600\"},{\"date\":\"2013-06-01\",\"open\":\"436.936951\",\"high\":\"455.875885\",\"low\":\"424.034027\",\"close\":\"440.625641\",\"adjclose\":\"440.625641\",\"volume\":\"97063000\"},{\"date\":\"2013-07-01\",\"open\":\"443.668671\",\"high\":\"464.464478\",\"low\":\"438.243256\",\"close\":\"444.319305\",\"adjclose\":\"444.319305\",\"volume\":\"102387300\"},{\"date\":\"2013-08-01\",\"open\":\"447.947937\",\"high\":\"455.310303\",\"low\":\"423.203217\",\"close\":\"423.873871\",\"adjclose\":\"423.873871\",\"volume\":\"66906000\"},{\"date\":\"2013-09-01\",\"open\":\"427.607605\",\"high\":\"453.448456\",\"low\":\"427.402405\",\"close\":\"438.393402\",\"adjclose\":\"438.393402\",\"volume\":\"66180000\"},{\"date\":\"2013-10-01\",\"open\":\"440.565552\",\"high\":\"521.281311\",\"low\":\"421.911926\",\"close\":\"515.805786\",\"adjclose\":\"515.805786\",\"volume\":\"110337300\"},{\"date\":\"2013-11-01\",\"open\":\"516.411438\",\"high\":\"534.534546\",\"low\":\"503.002991\",\"close\":\"530.325317\",\"adjclose\":\"530.325317\",\"volume\":\"52459700\"},{\"date\":\"2013-12-01\",\"open\":\"532.287292\",\"high\":\"561.061035\",\"low\":\"525.035034\",\"close\":\"560.915894\",\"adjclose\":\"560.915894\",\"volume\":\"67617600\"},{\"date\":\"2014-01-01\",\"open\":\"558.288269\",\"high\":\"593.863892\",\"low\":\"541.676697\",\"close\":\"591.076050\",\"adjclose\":\"591.076050\",\"volume\":\"108913300\"},{\"date\":\"2014-02-01\",\"open\":\"590.190186\",\"high\":\"615.055054\",\"low\":\"564.574585\",\"close\":\"608.433411\",\"adjclose\":\"608.433411\",\"volume\":\"81010500\"},{\"date\":\"2014-03-01\",\"open\":\"603.979004\",\"high\":\"614.109131\",\"low\":\"551.601624\",\"close\":\"557.812805\",\"adjclose\":\"557.812805\",\"volume\":\"87224100\"},{\"date\":\"2014-04-01\",\"open\":\"560.695679\",\"high\":\"588.299988\",\"low\":\"511.000000\",\"close\":\"534.880005\",\"adjclose\":\"534.880005\",\"volume\":\"71064200\"},{\"date\":\"2014-05-01\",\"open\":\"534.250000\",\"high\":\"577.659973\",\"low\":\"511.089996\",\"close\":\"571.650024\",\"adjclose\":\"571.650024\",\"volume\":\"41456800\"},{\"date\":\"2014-06-01\",\"open\":\"569.750000\",\"high\":\"589.599976\",\"low\":\"547.469971\",\"close\":\"584.669983\",\"adjclose\":\"584.669983\",\"volume\":\"39489200\"},{\"date\":\"2014-07-01\",\"open\":\"587.650024\",\"high\":\"608.909973\",\"low\":\"572.099976\",\"close\":\"579.549988\",\"adjclose\":\"579.549988\",\"volume\":\"38583300\"},{\"date\":\"2014-08-01\",\"open\":\"578.549988\",\"high\":\"597.809998\",\"low\":\"567.450012\",\"close\":\"582.359985\",\"adjclose\":\"582.359985\",\"volume\":\"29078700\"},{\"date\":\"2014-09-01\",\"open\":\"582.950012\",\"high\":\"605.400024\",\"low\":\"577.010010\",\"close\":\"588.409973\",\"adjclose\":\"588.409973\",\"volume\":\"35425100\"},{\"date\":\"2014-10-01\",\"open\":\"586.799988\",\"high\":\"592.400024\",\"low\":\"518.409973\",\"close\":\"567.869995\",\"adjclose\":\"567.869995\",\"volume\":\"55481600\"},{\"date\":\"2014-11-01\",\"open\":\"563.530029\",\"high\":\"567.150024\",\"low\":\"539.190002\",\"close\":\"549.080017\",\"adjclose\":\"549.080017\",\"volume\":\"29770500\"},{\"date\":\"2014-12-01\",\"open\":\"545.090027\",\"high\":\"548.789978\",\"low\":\"497.190002\",\"close\":\"530.659973\",\"adjclose\":\"530.659973\",\"volume\":\"54434300\"},{\"date\":\"2015-01-01\",\"open\":\"532.599976\",\"high\":\"545.409973\",\"low\":\"490.910004\",\"close\":\"537.549988\",\"adjclose\":\"537.549988\",\"volume\":\"52846300\"},{\"date\":\"2015-02-01\",\"open\":\"534.320007\",\"high\":\"569.419983\",\"low\":\"521.719971\",\"close\":\"562.630005\",\"adjclose\":\"562.630005\",\"volume\":\"40419300\"},{\"date\":\"2015-03-01\",\"open\":\"567.000000\",\"high\":\"583.200012\",\"low\":\"550.330017\",\"close\":\"554.700012\",\"adjclose\":\"554.700012\",\"volume\":\"43207200\"},{\"date\":\"2015-04-01\",\"open\":\"554.830017\",\"high\":\"584.700012\",\"low\":\"529.000000\",\"close\":\"548.770020\",\"adjclose\":\"548.770020\",\"volume\":\"43745000\"},{\"date\":\"2015-05-01\",\"open\":\"550.510010\",\"high\":\"558.239990\",\"low\":\"532.239990\",\"close\":\"545.320007\",\"adjclose\":\"545.320007\",\"volume\":\"32421700\"},{\"date\":\"2015-06-01\",\"open\":\"548.729980\",\"high\":\"565.609985\",\"low\":\"538.849976\",\"close\":\"540.039978\",\"adjclose\":\"540.039978\",\"volume\":\"35216400\"},{\"date\":\"2015-07-01\",\"open\":\"543.659973\",\"high\":\"713.330017\",\"low\":\"539.760010\",\"close\":\"657.500000\",\"adjclose\":\"657.500000\",\"volume\":\"68542900\"},{\"date\":\"2015-08-01\",\"open\":\"657.659973\",\"high\":\"704.000000\",\"low\":\"593.090027\",\"close\":\"647.820007\",\"adjclose\":\"647.820007\",\"volume\":\"55347100\"},{\"date\":\"2015-09-01\",\"open\":\"633.809998\",\"high\":\"681.989990\",\"low\":\"617.840027\",\"close\":\"638.369995\",\"adjclose\":\"638.369995\",\"volume\":\"43575200\"},{\"date\":\"2015-10-01\",\"open\":\"637.940002\",\"high\":\"752.500000\",\"low\":\"631.119995\",\"close\":\"737.390015\",\"adjclose\":\"737.390015\",\"volume\":\"50264300\"},{\"date\":\"2015-11-01\",\"open\":\"734.530029\",\"high\":\"782.900024\",\"low\":\"731.450012\",\"close\":\"762.849976\",\"adjclose\":\"762.849976\",\"volume\":\"37574100\"},{\"date\":\"2015-12-01\",\"open\":\"766.940002\",\"high\":\"798.690002\",\"low\":\"736.260010\",\"close\":\"778.010010\",\"adjclose\":\"778.010010\",\"volume\":\"43634700\"},{\"date\":\"2016-01-01\",\"open\":\"762.200012\",\"high\":\"769.200012\",\"low\":\"687.780029\",\"close\":\"761.349976\",\"adjclose\":\"761.349976\",\"volume\":\"51999200\"},{\"date\":\"2016-02-01\",\"open\":\"771.260010\",\"high\":\"810.349976\",\"low\":\"682.010010\",\"close\":\"717.219971\",\"adjclose\":\"717.219971\",\"volume\":\"67647300\"},{\"date\":\"2016-03-01\",\"open\":\"721.299988\",\"high\":\"777.309998\",\"low\":\"704.000000\",\"close\":\"762.900024\",\"adjclose\":\"762.900024\",\"volume\":\"42665700\"},{\"date\":\"2016-04-01\",\"open\":\"757.159973\",\"high\":\"790.950012\",\"low\":\"703.200012\",\"close\":\"707.880005\",\"adjclose\":\"707.880005\",\"volume\":\"46661400\"},{\"date\":\"2016-05-01\",\"open\":\"711.919983\",\"high\":\"753.479980\",\"low\":\"704.049988\",\"close\":\"748.849976\",\"adjclose\":\"748.849976\",\"volume\":\"34102300\"},{\"date\":\"2016-06-01\",\"open\":\"748.469971\",\"high\":\"751.369995\",\"low\":\"672.659973\",\"close\":\"703.530029\",\"adjclose\":\"703.530029\",\"volume\":\"41966500\"},{\"date\":\"2016-07-01\",\"open\":\"705.099976\",\"high\":\"803.940002\",\"low\":\"699.000000\",\"close\":\"791.340027\",\"adjclose\":\"791.340027\",\"volume\":\"32662200\"},{\"date\":\"2016-08-01\",\"open\":\"786.669983\",\"high\":\"813.880005\",\"low\":\"785.039978\",\"close\":\"789.849976\",\"adjclose\":\"789.849976\",\"volume\":\"28854000\"},{\"date\":\"2016-09-01\",\"open\":\"791.979980\",\"high\":\"819.059998\",\"low\":\"783.500000\",\"close\":\"804.059998\",\"adjclose\":\"804.059998\",\"volume\":\"31544800\"},{\"date\":\"2016-10-01\",\"open\":\"802.549988\",\"high\":\"839.000000\",\"low\":\"796.229980\",\"close\":\"809.900024\",\"adjclose\":\"809.900024\",\"volume\":\"35391000\"},{\"date\":\"2016-11-01\",\"open\":\"810.869995\",\"high\":\"816.039978\",\"low\":\"743.590027\",\"close\":\"775.880005\",\"adjclose\":\"775.880005\",\"volume\":\"48353400\"},{\"date\":\"2016-12-01\",\"open\":\"778.549988\",\"high\":\"824.299988\",\"low\":\"753.359985\",\"close\":\"809.450012\",\"adjclose\":\"809.450012\",\"volume\":\"37862800\"},{\"date\":\"2017-01-01\",\"open\":\"800.619995\",\"high\":\"867.000000\",\"low\":\"796.890015\",\"close\":\"820.190002\",\"adjclose\":\"820.190002\",\"volume\":\"36832700\"},{\"date\":\"2017-02-01\",\"open\":\"824.000000\",\"high\":\"853.789978\",\"low\":\"812.049988\",\"close\":\"844.929993\",\"adjclose\":\"844.929993\",\"volume\":\"26490800\"},{\"date\":\"2017-03-01\",\"open\":\"851.380005\",\"high\":\"874.419983\",\"low\":\"824.299988\",\"close\":\"847.799988\",\"adjclose\":\"847.799988\",\"volume\":\"34550100\"},{\"date\":\"2017-04-01\",\"open\":\"848.750000\",\"high\":\"935.900024\",\"low\":\"834.599976\",\"close\":\"924.520020\",\"adjclose\":\"924.520020\",\"volume\":\"28721600\"},{\"date\":\"2017-05-01\",\"open\":\"924.150024\",\"high\":\"999.599976\",\"low\":\"920.799988\",\"close\":\"987.090027\",\"adjclose\":\"987.090027\",\"volume\":\"35359300\"},{\"date\":\"2017-06-01\",\"open\":\"990.960022\",\"high\":\"1008.609985\",\"low\":\"929.599976\",\"close\":\"929.679993\",\"adjclose\":\"929.679993\",\"volume\":\"44085300\"},{\"date\":\"2017-07-01\",\"open\":\"933.219971\",\"high\":\"1006.190002\",\"low\":\"915.309998\",\"close\":\"945.500000\",\"adjclose\":\"945.500000\",\"volume\":\"41908600\"},{\"date\":\"2017-08-01\",\"open\":\"947.809998\",\"high\":\"957.200012\",\"low\":\"918.599976\",\"close\":\"955.239990\",\"adjclose\":\"955.239990\",\"volume\":\"32846200\"},{\"date\":\"2017-09-01\",\"open\":\"957.469971\",\"high\":\"975.809998\",\"low\":\"924.510010\",\"close\":\"973.719971\",\"adjclose\":\"973.719971\",\"volume\":\"29626200\"},{\"date\":\"2017-10-01\",\"open\":\"975.650024\",\"high\":\"1063.619995\",\"low\":\"961.950012\",\"close\":\"1033.040039\",\"adjclose\":\"1033.040039\",\"volume\":\"36853800\"},{\"date\":\"2017-11-01\",\"open\":\"1036.319946\",\"high\":\"1080.000000\",\"low\":\"1028.660034\",\"close\":\"1036.170044\",\"adjclose\":\"1036.170044\",\"volume\":\"28686000\"},{\"date\":\"2017-12-01\",\"open\":\"1030.410034\",\"high\":\"1086.489990\",\"low\":\"1002.320007\",\"close\":\"1053.400024\",\"adjclose\":\"1053.400024\",\"volume\":\"29940500\"},{\"date\":\"2018-01-01\",\"open\":\"1053.020020\",\"high\":\"1198.000000\",\"low\":\"1053.020020\",\"close\":\"1182.219971\",\"adjclose\":\"1182.219971\",\"volume\":\"32887400\"},{\"date\":\"2018-02-01\",\"open\":\"1175.989990\",\"high\":\"1187.449951\",\"low\":\"997.000000\",\"close\":\"1103.920044\",\"adjclose\":\"1103.920044\",\"volume\":\"51340700\"},{\"date\":\"2018-03-01\",\"open\":\"1109.540039\",\"high\":\"1178.160034\",\"low\":\"984.000000\",\"close\":\"1037.140015\",\"adjclose\":\"1037.140015\",\"volume\":\"52116800\"},{\"date\":\"2018-04-01\",\"open\":\"1027.619995\",\"high\":\"1097.510010\",\"low\":\"994.250000\",\"close\":\"1018.580017\",\"adjclose\":\"1018.580017\",\"volume\":\"49246400\"},{\"date\":\"2018-05-01\",\"open\":\"1016.299988\",\"high\":\"1118.150024\",\"low\":\"1007.890015\",\"close\":\"1100.000000\",\"adjclose\":\"1100.000000\",\"volume\":\"37036700\"},{\"date\":\"2018-06-01\",\"open\":\"1112.869995\",\"high\":\"1201.489990\",\"low\":\"1106.069946\",\"close\":\"1129.189941\",\"adjclose\":\"1129.189941\",\"volume\":\"40184200\"},{\"date\":\"2018-07-01\",\"open\":\"1115.349976\",\"high\":\"1291.439941\",\"low\":\"1106.599976\",\"close\":\"1227.219971\",\"adjclose\":\"1227.219971\",\"volume\":\"41782700\"},{\"date\":\"2018-08-01\",\"open\":\"1239.109985\",\"high\":\"1271.959961\",\"low\":\"1204.000000\",\"close\":\"1231.800049\",\"adjclose\":\"1231.800049\",\"volume\":\"34285900\"},{\"date\":\"2018-09-01\",\"open\":\"1222.520020\",\"high\":\"1227.869995\",\"low\":\"1151.500000\",\"close\":\"1207.079956\",\"adjclose\":\"1207.079956\",\"volume\":\"35925900\"},{\"date\":\"2018-10-01\",\"open\":\"1213.000000\",\"high\":\"1224.520020\",\"low\":\"1007.200012\",\"close\":\"1090.579956\",\"adjclose\":\"1090.579956\",\"volume\":\"56547100\"},{\"date\":\"2018-11-01\",\"open\":\"1091.400024\",\"high\":\"1109.930054\",\"low\":\"1002.210022\",\"close\":\"1109.650024\",\"adjclose\":\"1109.650024\",\"volume\":\"39311800\"},{\"date\":\"2018-12-01\",\"open\":\"1132.160034\",\"high\":\"1135.000000\",\"low\":\"977.659973\",\"close\":\"1044.959961\",\"adjclose\":\"1044.959961\",\"volume\":\"42871800\"},{\"date\":\"2019-01-01\",\"open\":\"1027.199951\",\"high\":\"1127.670044\",\"low\":\"1022.369995\",\"close\":\"1125.890015\",\"adjclose\":\"1125.890015\",\"volume\":\"34858400\"},{\"date\":\"2019-02-01\",\"open\":\"1122.290039\",\"high\":\"1154.000000\",\"low\":\"1093.589966\",\"close\":\"1126.550049\",\"adjclose\":\"1126.550049\",\"volume\":\"32608700\"},{\"date\":\"2019-03-01\",\"open\":\"1131.000000\",\"high\":\"1236.439941\",\"low\":\"1130.199951\",\"close\":\"1176.890015\",\"adjclose\":\"1176.890015\",\"volume\":\"33186900\"},{\"date\":\"2019-04-01\",\"open\":\"1187.540039\",\"high\":\"1296.969971\",\"low\":\"1183.000000\",\"close\":\"1198.959961\",\"adjclose\":\"1198.959961\",\"volume\":\"32372900\"},{\"date\":\"2019-05-01\",\"open\":\"1197.500000\",\"high\":\"1199.250000\",\"low\":\"1103.349976\",\"close\":\"1106.500000\",\"adjclose\":\"1106.500000\",\"volume\":\"37136300\"},{\"date\":\"2019-06-01\",\"open\":\"1066.930054\",\"high\":\"1126.569946\",\"low\":\"1027.030029\",\"close\":\"1082.800049\",\"adjclose\":\"1082.800049\",\"volume\":\"35622600\"},{\"date\":\"2019-07-01\",\"open\":\"1101.040039\",\"high\":\"1268.390015\",\"low\":\"1095.329956\",\"close\":\"1218.199951\",\"adjclose\":\"1218.199951\",\"volume\":\"35756500\"},{\"date\":\"2019-08-01\",\"open\":\"1217.630005\",\"high\":\"1236.300049\",\"low\":\"1142.750000\",\"close\":\"1190.530029\",\"adjclose\":\"1190.530029\",\"volume\":\"29315500\"},{\"date\":\"2019-09-01\",\"open\":\"1181.849976\",\"high\":\"1248.020020\",\"low\":\"1163.709961\",\"close\":\"1221.140015\",\"adjclose\":\"1221.140015\",\"volume\":\"25853600\"},{\"date\":\"2019-10-01\",\"open\":\"1222.489990\",\"high\":\"1299.239990\",\"low\":\"1163.140015\",\"close\":\"1258.800049\",\"adjclose\":\"1258.800049\",\"volume\":\"30181500\"},{\"date\":\"2019-11-01\",\"open\":\"1265.800049\",\"high\":\"1333.920044\",\"low\":\"1259.709961\",\"close\":\"1304.089966\",\"adjclose\":\"1304.089966\",\"volume\":\"26438500\"},{\"date\":\"2019-12-01\",\"open\":\"1302.560059\",\"high\":\"1367.050049\",\"low\":\"1277.050049\",\"close\":\"1339.390015\",\"adjclose\":\"1339.390015\",\"volume\":\"27955300\"},{\"date\":\"2020-01-01\",\"open\":\"1348.410034\",\"high\":\"1500.579956\",\"low\":\"1346.489990\",\"close\":\"1432.780029\",\"adjclose\":\"1432.780029\",\"volume\":\"33679700\"},{\"date\":\"2020-02-01\",\"open\":\"1461.650024\",\"high\":\"1530.739990\",\"low\":\"1268.209961\",\"close\":\"1339.250000\",\"adjclose\":\"1339.250000\",\"volume\":\"41560800\"},{\"date\":\"2020-03-01\",\"open\":\"1351.390015\",\"high\":\"1408.189941\",\"low\":\"1008.869995\",\"close\":\"1161.949951\",\"adjclose\":\"1161.949951\",\"volume\":\"78535800\"},{\"date\":\"2020-04-01\",\"open\":\"1124.000000\",\"high\":\"1221.989990\",\"low\":\"1075.079956\",\"close\":\"1206.569946\",\"adjclose\":\"1206.569946\",\"volume\":\"18952800\"},{\"date\":\"2020-04-09\",\"open\":\"1218.180054\",\"high\":\"1221.979980\",\"low\":\"1192.416626\",\"close\":\"1206.569946\",\"adjclose\":\"1206.569946\",\"volume\":\"2701423\"}]}}";

            storeStockData(input);
            console.log(getStockData("GOOGL").description);*/

            let stream = new DataStream("stockStream");
            stream.setOnMessage(function(e)
            {
                let output = "";
                let data = JSON.parse(e.data);
                if(data.type === "stocks")
                {

                }
                else if(data.type === "stockDatas")
                {
                    let graphsElem = document.getElementById("graphs");
                    for(let stockStr of data.data)
                    {
                        let stockJson = JSON.parse(stockStr);
                        console.log(stockJson);
                        storeStockData(stockJson);


                        graphsElem.innerHTML += "<div id=graph-" + stockJson.symbol + "></div>";
                        genPriceHistoryGraph("graph-" + stockJson.symbol, stockJson.symbol, new Date("2010-01-01"), new Date("2020-01-01"));
                        output += "<p>" + JSON.stringify(getStockData(stockJson.symbol)) + "</p>";
                    }

                    genPriceHistoryGraph("graph", "AMZN");
                }
                else
                {

                }
            });

/*            stream.sendMessage({msg: "data="+encodeURIComponent("hello!"), protocol: "POST", onReceived: (r) => {
                if(r.readyState === XMLHttpRequest.DONE && r.status === 200)
                {
                    console.log(r.responseText);
                }
            }});*/

            stream.sendMessage({msg: "dataRequest={type: \"stockDatas\", symbols: [\"AMZN\", \"TSLA\", \"GOOGL\"]}", protocol: "POST", onReceived: (r) =>
                {
                    if(r.readyState === XMLHttpRequest.DONE && r.status === 200)
                    {
                        let text = r.responseText;
                        if(text && text.length > 0)
                        {
                            console.log(r.responseText);
                        }
                    }
                }});
        </script>
    </head>

    <body>
        <div id="graphs" onload=''></div>
    </body>
</html>